name: üöÄ Deploy Opoquiz via SFTP

on:
  push:
    branches:
      - main  # Cambia si usas otra rama principal

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      # 1Ô∏è‚É£ Descargar el c√≥digo
      - name: Checkout code
        uses: actions/checkout@v3

      # 2Ô∏è‚É£ Subir archivos v√≠a SFTP
      - name: Deploy to Alwaysdata via SFTP
        uses: appleboy/scp-action@master
        with:
          host: ftp-mascu.alwaysdata.net       # Host SFTP de Alwaysdata
          username: ${{ secrets.ALWAYSDATA_FTP_USER }}  # Usuario FTP
          password: ${{ secrets.ALWAYSDATA_FTP_PASS }}  # Contrase√±a FTP
          port: 22                             # Puerto SFTP
          source: "backend/*"                  # Carpeta local que quieres subir
          target: "/www/quiz/backend/"         # Carpeta destino en Alwaysdata
          strip_components: 1                  # Opcional: elimina la carpeta ra√≠z 'backend' al subir
          debug: true                          # Opcional: activa el modo debug para ver m√°s detalles